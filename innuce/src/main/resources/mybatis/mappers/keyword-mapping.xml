<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  
<mapper namespace="com.mc.innuce.domain.search.dao.KeywordDAO">
<!-- 
id: dao에서 메소드명
 -->
 <!-- 검색 시 뉴스들 가져오기 -->
<select id="getNewsList" resultType="newsdto" parameterType="int">
	select news.* from keyword_news join news using(news_key)
	where keyword_key = #{keyword_key}
	order by news_writendate desc
</select>
<!-- paging -->
<select id="getNewsListLimit" resultType="newsdto" parameterType="int">
	select news.* from keyword_news kn join news n using(news_key)
	where kn.keyword_key = #{keyword_key}
	order by n.news_writendate desc
	limit <foreach collection="array" item="num" separator=",">#{num}</foreach>
</select>
 <!-- 검색 시 뉴스 개수 -->
<select id="getTotalNews" resultType="int">
	select count(*) from keyword_news join news using(news_key)
	where keyword_key = #{keyword_key}
</select>
<!-- (select keyword_key from keyword where keyword_content = #{keyword } ) -->

<!-- <select id="getNewKeys" resultType="newsdto">
	select * from news join keyword_news using(news_key)
	where keyword_key = (select keyword_key from keyword where keyword_content = #{keyword })
</select> -->

<select id="getNewKeys" resultType="Long" parameterType="String">
select news_key from news where news_title like concat('%',#{keyword },'%')
</select>

<!-- <select id="getNewsKeys2" resultType="long" parameterType="String">
	select news.news_key from keyword_news as kn join news using(news_key)
	where keyword_key = (select keyword_key from keyword where keyword_content = #{keyword })
</select>
 -->
 
 <!-- 키워드 뉴스 가져오기 -->
<!--  <select id="getNewsList" resultType="newsdto" parameterType="int">
	select n.* from keyword_news kn join news n using(news_key) join keyword k using(keyword_key)
	where kn.keyword_key = #{keyword_key}
	order by k.search_count desc, n.news_writendate desc
	limit 0,5
</select> -->


</mapper>
